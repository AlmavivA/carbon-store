<%
 // print('this is the default api router');

  var log=new Log('api.router');

  //log.info('content type: '+request.getContentType());
  //log.info('content length: '+request.getContentLength());
  //log.info('content: '+request.getContent());
  //log.info(request.getParameter('file'));

 /* var UUID=java.util.UUID;

  var result=UUID.randomUUID();

  print('result:'+result);        */

  /*var contents=request.getAllParameters('UTF-8');

  log.info('content is'+contents[0]);*/

 var db=new Database('jdbc:h2:~/test','sa','');

var file=new File('/tests/banner.png');

file.open('r');

//var insertQuery='INSERT INTO resource (uuid,tenantId,content) VALUES (?,?,?)';

//db.query(insertQuery,'a','b',file.getStream());

var selectQuery='SELECT content FROM resource;';

var result=db.query(selectQuery);

log.info(result.length);
var temp;

for(var row in result){

    for(var index in result[row]){
        temp=result[row];
    }
}

log.info(temp[index]);
response.addHeader('Content-Type','image/png');
log.info('length of original file: '+file.getLength());
response.addHeader('Content-Length',file.getLength()+'');
//response.addHeader('Connection','close');
//response.content=file.getStream();
//print(file.getStream());
var str=temp[index].getStream();
print(temp[index]);

//temp[index].close();
//file.close();

 //var createTableQuery='CREATE TABLE resource ( uuid VARCHAR(250), tenantId VARCHAR(250), content BLOB );';

 //db.query(createTableQuery);
 //db.connect();
 //var prep=db.prepareStatement('INSERT INTO resource (uuid,tenantId) VALUES (?,?)');
%>