<%
/*
	Description: Provides CRUD operations on groups of assets
		GET api/assets		      	 : Returns  a list of all asset types
		GET api/assets/{type}            : Returns  a list of all assets  
		GET api/assets/{type}/{pageSize} : Returns  a paged list of assets
	Filename:assets.js
	Created Date: 29/7/2013
*/

var router=require('/modules/router-g.js').router();
var caramel=require('caramel');

var routeMnger=new router.Router();
//var routeManager=application.get(config.app.ROUTE_MANAGER);
var rxtManager=application.get(config.app.RXT_MANAGER);
var DEFAULT_PAGE=10;

routeMnger.register('GET','publisher','/publisher/assets/',function(context){

	//Print all of the rxt types 
	for each(var template in rxtManager.rxtTemplates){
		print(template.shortName+'</br>');
	}
	
});

routeMnger.register('GET','publisher','/publisher/assets/{type}',function(context){
	
	//TODO: Check for valid asset types
	var artifactManager=rxtManager.getArtifactManager(context.params.type);

	var artifacts=artifactManager.list(DEFAULT_PAGE)||[];

	for each(var artifact in artifacts){
		print(artifact.id+'<br/><br/>');
	}
});

routeMnger.register('DELETE','publisher','/publisher/assets/{type}',function(context){

});

routeMnger.register('POST','publisher','/publisher/assets/{type}',function(context){


});

routeMnger.register('PUT','publisher','/publisher/assets/{type}/{id}/{property}/{value}',function(context){

});

routeMnger.handle(request,response);

%>
